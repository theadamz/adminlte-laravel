import{i as f,a as _,c as b,e as h,M as n,s as l,q as g,f as d,r as c,g as T,h as s,_ as p,l as m}from"./general-DAK3ebw_.js";let i=null;const v=document.querySelector("#formInput");function S(){_dataTable=$("#list_datatable").DataTable({lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"All"]],pageLength:50,numbers_length:4,searchDelay:500,processing:!0,serverSide:!0,scrollX:!0,stateSave:_dataTableUseState,stateDuration:_dataTableStateDuration,scrollY:_dataTableScrollY,order:[[0,"asc"]],select:{items:"row",style:"single",className:"bg-warning"},headerCallback:function(a,e,t,o,D){a.getElementsByTagName("th")[0].innerHTML=`
            <div class="form-check">
               <input class="form-check-input datatable-group-checkable" type="checkbox" value="" id="groupCheckable" />
					<label class="form-check-label"></label>
            </div>`},createdRow:function(a,e,t){_dataTableSelectedValues.indexOf(e[_dataTableSelectColumn])>-1&&$(a).addClass("bg-light")},ajax:{url:`${_baseURL}/dt/configs/inventories/components/names`,type:"GET",data:function(a){}},columns:[{data:"id",width:"30px",orderable:!1,searchable:!1,render:function(a,e,t,o){return`<div class="form-check">
                               <input class="form-check-input datatable-checkable" type="checkbox" value="${a}" ${_dataTableSelectedValues.indexOf(a)>-1?"checked":""} data-index="${o.row}" />
                                        <label class="form-check-label"></label>
                            </div>`}},{data:"name"},{data:"asset_component_name",searchable:!1}]}).on("xhr.dt",function(a,e,t,o){setTimeout(()=>{_dataTable.columns.adjust()},300)}).on("draw.dt",function(a,e,t,o){f(_dataTable)}),_(_dataTable,'input[type="search"]'),document.querySelector("#refresh").addEventListener("click",()=>r(!1))}function x(){_formValidation=$(v).validate({rules:{asset_component:{required:!0},name:{required:!0}},submitHandler:w})}function L(){$("#modalFormInput").on("hidden.bs.modal",u),b("#modalFormInput"),document.getElementById("assetComponentLOV").addEventListener("click",C)}function k(){_permissions.edit&&document.querySelector("#edit").addEventListener("click",()=>{typeof _dataTable.row({selected:!0}).data()>"u"||E(_dataTable.row({selected:!0}).data().id.trim())}),_permissions.delete&&document.querySelector("#delete").addEventListener("click",V)}function y(){h("#name")}function w(){n.Confirm("Are you sure?").then(a=>{l(!0,"#save"),i=`${_baseURL}/configs/inventories/components/names`,_action==="edit"&&(i+=`/${_id}`);const e=_action==="create"?"POST":"PUT";_data2Send=g($("#formInput").serialize(),!1),d(i,e,_data2Send,"application/json").then(t=>{[201,200].includes(t.status)?(_action="create",Toast.fire({icon:"success",title:t.statusText,text:t.data.message}),u(),r(!1),$("#modalFormInput").modal("hide")):(n.HtmlNotification(c(t.data),`${t.status} - ${t.statusText}`),T(t.data.errors)),l(!1,"#save")}).catch(t=>{n.Notification(t.toString()),l(!1,"#save")})}).catch(a=>{a&&console.log(a)})}function E(a=null){_id=a,s("#list_datatable"),d(`${_baseURL}/configs/inventories/components/names/${_id}`,"GET",null).then(e=>{if([200].includes(e.status)){u(),_action="edit";const t=e.data.data;$("#asset_component").val(t.asset_component_id),$("#asset_component_name").val(t.asset_component.name),$("#name").val(t.name),$("#modalFormInput").modal("show")}else n.HtmlNotification(c(e.data),`${e.status} - ${e.statusText}`);s("#list_datatable",!1)}).catch(e=>{n.Notification(e.toString()),s("#list_datatable",!1)})}function V(){if(_dataTableSelectedValues.length<=0){n.HtmlNotification("Select 1 atau more data.");return}n.Confirm(`Are you sure want to delete ${_dataTableSelectedValues.length} data?`,null,"warning").then(a=>{l(!0,"#delete"),s("#list_datatable"),_data2Send=new URLSearchParams({id:JSON.stringify(_dataTableSelectedValues)}),d(`${_baseURL}/configs/inventories/components/names`,"DELETE",_data2Send).then(e=>{[200].includes(e.status)?(Toast.fire({icon:"success",title:e.statusText,text:e.data.message}),p(),r(!1)):n.HtmlNotification(c(e.data),`${e.status} - ${e.statusText}`),l(!1,"#delete"),s("#list_datatable",!1)}).catch(e=>{n.Notification(e.toString()),l(!1,"#delete"),s("#list_datatable",!1)})}).catch(a=>{a&&console.log(a)})}function r(a=!0){_dataTableResetFilter=!1,_dataTable.ajax.reload(null,a)}function u(){_action="create",_data2Send=null,$("#formInput")[0].reset(),$("#asset_component").val(null),_formValidation.resetForm()}function C(){m(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/inventories/components`,()=>{m(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){$resultFromLOV.result&&($("#asset_component").val($resultFromLOV.data.id),$("#asset_component_name").val($resultFromLOV.data.name))})})}document.addEventListener("DOMContentLoaded",function(){S(),x(),L(),y(),k()});

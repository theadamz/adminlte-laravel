import{y as n,A as c,e as s,M as r,s as i,m as l,B as m,f as g,r as f,g as L,z as u,l as a}from"./general-DAK3ebw_.js";let _=null;const p=document.querySelector("#formInput");let e={};function h(){_formValidation=$(p).validate({rules:{asset_alias_id:{required:function(){return!$("#asset_id_auto_generate").is(":checked")}},asset_name:{required:function(){return!$("#asset_name_auto_generate").is(":checked")}},category:{required:!0},category_sub:{required:!0},brand:{required:!0},model:{required:!0},status:{required:!0},serial_number:{required:!0},asset_smart_device:{required:function(){return!$("#is_standalone").is(":checked")}},building:{required:function(){return $("#is_standalone").is(":checked")}},location:{required:function(){return $("#is_standalone").is(":checked")}},supplier:{required:!0},purchase_no:{required:!0},purchase_date:{required:!0,dateValid:!0},purchase_cost:{required:!0,formatNumber:!0},weight:{required:!0,formatNumber:!0},warranty_date:{required:!0,dateValid:!0},eol_date:{required:!0,dateValid:!0}},submitHandler:O})}function V(){n("#purchase_date","date"),n("#warranty_date","date"),n("#eol_date","date"),c("#purchase_cost","float"),c("#weight","float"),document.getElementById("clear").addEventListener("click",()=>v()),$("#asset_id_auto_generate").on("change",function(){$("#asset_alias_id").prop("disabled",$(this).is(":checked")),$("#asset_alias_id").val($(this).is(":checked")?"AUTO":"")}),$("#asset_name_auto_generate").on("change",function(){$("#asset_name").prop("disabled",$(this).is(":checked")),$("#asset_name").val($(this).is(":checked")?"AUTO":"")}),$("#is_standalone").on("change",function(){$("#asset_smart_device").val(null),$("#asset_smart_device_name").val(null),$("#asset_smart_device_name").prop("disabled",$(this).is(":checked")),$("#assetSmartDeviceLOV").prop("disabled",$(this).is(":checked")),$(this).is(":checked")?($(".asset-smart-device-container").addClass("d-none"),$(".asset-location-container").removeClass("d-none")):($(".asset-smart-device-container").removeClass("d-none"),$(".asset-location-container").addClass("d-none"))}),$(".asset-location-container").addClass("d-none"),document.getElementById("remove_pic").addEventListener("click",function(){$("#picture_preview").attr("src",_noImageSrc)}),document.getElementById("choose_pic").addEventListener("click",function(){$("#picture").click()}),$("#picture").change(function(){if(this.files&&this.files[0]){let d=new FileReader;d.onload=function(o){$("#picture_preview").attr("src",o.target.result)},d.readAsDataURL(this.files[0]),d.onloadend=function(){d.abort()}}}),document.getElementById("categoryLOV").addEventListener("click",F),document.getElementById("subCategoryLOV").addEventListener("click",y),document.getElementById("brandLOV").addEventListener("click",k),document.getElementById("modelLOV").addEventListener("click",E),document.getElementById("supplierLOV").addEventListener("click",w),document.getElementById("assetSmartDeviceLOV").addEventListener("click",q),document.getElementById("buildingLOV").addEventListener("click",C),document.getElementById("locationLOV").addEventListener("click",I)}function b(){s("#asset_alias_id"),s("#asset_name"),s("#serial_number"),s("#purchase_no")}function O(){r.Confirm("Are you sure?").then(d=>{i(!0,"#save"),_=`${_baseURL}/inventories/other-devices`;const o="POST";_data2Send=new FormData($("#formInput")[0]),_data2Send.append("asset_id_auto_generate",$("#asset_id_auto_generate").is(":checked")),_data2Send.append("asset_name_auto_generate",$("#asset_name_auto_generate").is(":checked")),_data2Send.append("is_standalone",$("#is_standalone").is(":checked")),_data2Send.append("purchase_date",l($("#purchase_date").datetimepicker("viewDate"),"YYYY-MM-DD")),_data2Send.append("warranty_date",l($("#warranty_date").datetimepicker("viewDate"),"YYYY-MM-DD")),_data2Send.append("eol_date",l($("#eol_date").datetimepicker("viewDate"),"YYYY-MM-DD")),_data2Send.append("purchase_cost",m($("#purchase_cost").val())),_data2Send.append("weight",m($("#weight").val())),g(_,o,_data2Send,null).then(t=>{[201].includes(t.status)?(_action="create",Toast.fire({icon:"success",title:t.statusText,text:t.data.message}),v(),$("#modalFormInput").modal("hide")):(r.HtmlNotification(f(t.data),`${t.status} - ${t.statusText}`),L(t.data.errors)),i(!1,"#save")}).catch(t=>{r.Notification(t.toString()),i(!1,"#save")})}).catch(d=>{d&&console.log(d)})}function v(){_action="create",_data2Send=null,$("#formInput")[0].reset(),$("#status option:eq(0)").prop("selected",!0).change(),$("#asset_id_auto_generate").prop("checked",!0),$("#asset_name_auto_generate").prop("checked",!0),$("#is_standalone").prop("checked",!1),$("#category").val(""),$("#category_sub").val(""),$("#brand").val(""),$("#model").val(""),$("#asset_smart_device").val(""),$("#building").val(""),$("#location").val(""),$("#supplier").val(""),$("#supplier_name").val(""),u("#purchase_date",moment()),u("#warranty_date",moment()),u("#eol_date",moment()),$("#purchase_cost").val(0),$("#weight").val(0),_formValidation.resetForm(),e={}}function F(){a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/inventories/categories?is_active=true`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.category==$resultFromLOV.data.id)return;e.category=$resultFromLOV.data.id,$("#category").val($resultFromLOV.data.id),$("#category_name").val($resultFromLOV.data.name),$("#category_sub").val(null),$("#category_sub_name").val(null)}})})}function y(){$("#category").val()&&(a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/inventories/sub-categories?category=${$("#category").val()}`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.category_sub==$resultFromLOV.data.id)return;e.category_sub=$resultFromLOV.data.id,$("#category_sub").val($resultFromLOV.data.id),$("#category_sub_name").val($resultFromLOV.data.name)}})}))}function k(){a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/inventories/brands`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.brand==$resultFromLOV.data.id)return;e.brand=$resultFromLOV.data.id,$("#brand").val($resultFromLOV.data.id),$("#brand_name").val($resultFromLOV.data.name),$("#model").val(null),$("#model_name").val(null)}})})}function E(){$("#brand").val()&&(a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/inventories/models?brand=${$("#brand").val()}`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.model==$resultFromLOV.data.id)return;e.model=$resultFromLOV.data.id,$("#model").val($resultFromLOV.data.id),$("#model_name").val($resultFromLOV.data.name)}})}))}function w(){a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/inventories/suppliers?is_active=true`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.supplier==$resultFromLOV.data.id)return;e.supplier=$resultFromLOV.data.id,$("#supplier").val($resultFromLOV.data.id),$("#supplier_name").val($resultFromLOV.data.name)}})})}function q(){$("#is_standalone").is(":checked")||(a(),$("#_dynamic_content").load(`${_baseURL}/lov/inventories/smart-devices`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.asset_smart_device==$resultFromLOV.data.id)return;e.asset_smart_device=$resultFromLOV.data.id,$("#asset_smart_device").val($resultFromLOV.data.id),$("#asset_smart_device_name").val(`${$resultFromLOV.data.asset_alias_id} - ${$resultFromLOV.data.smart_device_name}`)}})}))}function C(){a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/setups/buildings?is_active=true`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.building==$resultFromLOV.data.id)return;e.building=$resultFromLOV.data.id,$("#building").val($resultFromLOV.data.id),$("#building_name").val($resultFromLOV.data.name),$("#location").val(null),$("#location_name").val(null)}})})}function I(){$("#building").val()&&(a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/setups/locations?is_active=true&building=${$("#building").val()}`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.asset_smart_device==$resultFromLOV.data.id)return;e.asset_smart_device=$resultFromLOV.data.id,$("#location").val($resultFromLOV.data.id),$("#location_name").val($resultFromLOV.data.name)}})}))}document.addEventListener("DOMContentLoaded",function(){h(),V(),b()});

import{m as o,i as u,a as f,c as m,k as b,n as d,M as s,s as r,h as n,f as g,_ as h,r as _}from"./general-DAK3ebw_.js";const c=moment().subtract(365,"days");function T(){_dataTable=$("#list_datatable").DataTable({lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"All"]],pageLength:50,numbers_length:4,searchDelay:500,processing:!0,serverSide:!0,scrollX:!0,stateSave:_dataTableUseState,stateDuration:_dataTableStateDuration,scrollY:_dataTableScrollY,order:[[1,"asc"]],select:{items:"row",style:"single",className:"bg-warning"},headerCallback:function(e,t,a,l,D){e.getElementsByTagName("th")[0].innerHTML=`
            <div class="form-check">
               <input class="form-check-input datatable-group-checkable" type="checkbox" value="" id="groupCheckable" />
					<label class="form-check-label"></label>
            </div>`},createdRow:function(e,t,a){_dataTableSelectedValues.indexOf(t[_dataTableSelectColumn])>-1&&$(e).addClass("bg-light")},ajax:{url:`${_baseURL}/dt/clients/requests`,type:"GET",data:function(e){e.category=$("#filter_category").val(),e.department=$("#filter_department").val(),e.status=$("#filter_status").val(),e.start_date=$("#filter_date").data("daterangepicker").startDate.format("YYYY-MM-DD"),e.end_date=$("#filter_date").data("daterangepicker").endDate.format("YYYY-MM-DD")}},columns:[{data:"id",width:"30px",orderable:!1,searchable:!1,render:function(e,t,a,l){return`<div class="form-check">
                               <input class="form-check-input datatable-checkable" type="checkbox" value="${e}" ${_dataTableSelectedValues.indexOf(e)>-1?"checked":""} data-index="${l.row}" />
                                        <label class="form-check-label"></label>
                            </div>`}},{data:"ticket_no"},{data:"ticket_date",searchable:!1,render:function(e,t,a,l){return o(e)}},{data:"department_name"},{data:"subject"},{data:"asset_name"},{data:"assigned_name"},{data:"status",className:"dt-center",searchable:!1}]}).on("xhr.dt",function(e,t,a,l){setTimeout(()=>{_dataTable.columns.adjust()},300)}).on("draw.dt",function(e,t,a,l){u(_dataTable)}),f(_dataTable,'input[type="search"]'),document.querySelector("#refresh").addEventListener("click",()=>i(!1)),document.querySelector("#filterReset").addEventListener("click",y),document.querySelector("#formFilter").addEventListener("submit",e=>{e.preventDefault(),i(),$("#modalFormFilter").modal("hide")})}function k(){m("#modalFormFilter"),b("#filter_date"),d("#filter_date",c)}function S(){document.querySelector("#delete").addEventListener("click",p)}function p(){if(_dataTableSelectedValues.length<=0){s.HtmlNotification("Select 1 atau more data.");return}s.Confirm(`Are you sure want to delete ${_dataTableSelectedValues.length} data?`,null,"warning").then(e=>{r(!0,"#delete"),n("#list_datatable"),_data2Send=new URLSearchParams({id:JSON.stringify(_dataTableSelectedValues)}),g(`${_baseURL}/configs/users`,"DELETE",_data2Send).then(t=>{[200].includes(t.status)?(Toast.fire({icon:"success",title:t.statusText,text:t.data.message}),h(),i(!1)):s.HtmlNotification(_(t.data),`${t.status} - ${t.statusText}`),r(!1,"#delete"),n("#list_datatable",!1)}).catch(t=>{s.Notification(t.toString()),r(!1,"#delete"),n("#list_datatable",!1)})}).catch(e=>{e&&console.log(e)})}function i(e=!0){_dataTableResetFilter=!1,_dataTable.ajax.reload(null,e)}function y(){$("#filter_category").val(null).empty().trigger("change"),$("#filter_department").val(null).empty().trigger("change"),$("#filter_status").val(null).empty().trigger("change"),$("#formFilter")[0].reset(),setTimeout(()=>{d("#filter_date",c)},500)}document.addEventListener("DOMContentLoaded",function(){k(),T(),S()});

import{b as m,i as _,a as b,v as h,c as g,e as i,M as s,s as n,f as c,r as u,g as v,h as o,_ as p}from"./general-DAK3ebw_.js";let d=null;const T=document.querySelector("#formInput");function S(){_dataTable=$("#list_datatable").DataTable({lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"All"]],pageLength:50,numbers_length:4,searchDelay:500,processing:!0,serverSide:!0,scrollX:!0,stateSave:_dataTableUseState,stateDuration:_dataTableStateDuration,scrollY:_dataTableScrollY,order:[[0,"asc"]],select:{items:"row",style:"single",className:"bg-warning"},headerCallback:function(e,a,t,l,C){e.getElementsByTagName("th")[0].innerHTML=`
          <div class="form-check">
             <input class="form-check-input datatable-group-checkable" type="checkbox" value="" id="groupCheckable" />
        <label class="form-check-label"></label>
          </div>`},createdRow:function(e,a,t){_dataTableSelectedValues.indexOf(a[_dataTableSelectColumn])>-1&&$(e).addClass("bg-light")},ajax:{url:`${_baseURL}/dt/configs/inventories/suppliers`,type:"GET",data:function(e){e.is_active=$("#filter_is_active").val()}},columns:[{data:"id",width:"30px",orderable:!1,searchable:!1,render:function(e,a,t,l){return`<div class="form-check">
                             <input class="form-check-input datatable-checkable" type="checkbox" value="${e}" ${_dataTableSelectedValues.indexOf(e)>-1?"checked":""} data-index="${l.row}" />
                                      <label class="form-check-label"></label>
                          </div>`}},{data:"code"},{data:"name"},{data:"country"},{data:"city"},{data:"is_active",className:"dt-center",searchable:!1,render:function(e,a,t,l){return m(e)?'<span class="badge font-weight-normal badge-success">Yes</span>':'<span class="badge font-weight-normal badge-warning">No</span>'}}]}).on("xhr.dt",function(e,a,t,l){setTimeout(()=>{_dataTable.columns.adjust()},300)}).on("draw.dt",function(e,a,t,l){_(_dataTable)}),b(_dataTable,'input[type="search"]'),document.querySelector("#refresh").addEventListener("click",()=>r(!1)),document.querySelector("#filterReset").addEventListener("click",F),document.querySelector("#formFilter").addEventListener("submit",e=>{e.preventDefault(),r(),$("#modalFormFilter").modal("hide")})}function x(){_formValidation=$(T).validate({rules:{code:{required:!0,regex:h},name:{required:!0},country:{required:!0},address:{required:!0},email:{email:!0},web_url:{url:!0}},submitHandler:E})}function y(){$("#modalFormInput").on("hidden.bs.modal",f),g("#modalFormInput")}function w(){_permissions.edit&&document.querySelector("#edit").addEventListener("click",()=>{typeof _dataTable.row({selected:!0}).data()>"u"||L(_dataTable.row({selected:!0}).data().id.trim())}),_permissions.delete&&document.querySelector("#delete").addEventListener("click",D)}function k(){i("#code"),i("#name"),i("#country"),i("#region"),i("#city"),i("#address"),i("#postal_code"),i("#phone_no"),i("#fax_no"),i("#email"),i("#web_url")}function E(){s.Confirm("Are you sure?").then(e=>{n(!0,"#save"),d=`${_baseURL}/configs/inventories/suppliers`,_action==="edit"&&(d+=`/${_id}`);const a=_action==="create"?"POST":"PUT",t=$("#is_active").is(":checked")?"":"&is_active=false";_data2Send=$("#formInput").serialize()+t,c(d,a,_data2Send).then(l=>{[201,200].includes(l.status)?(_action="create",Toast.fire({icon:"success",title:l.statusText,text:l.data.message}),f(),r(!1),$("#modalFormInput").modal("hide")):(s.HtmlNotification(u(l.data),`${l.status} - ${l.statusText}`),v(l.data.errors)),n(!1,"#save")}).catch(l=>{s.Notification(l.toString()),n(!1,"#save")})}).catch(e=>{e&&console.log(e)})}function L(e=null){_id=e,o("#list_datatable"),c(`${_baseURL}/configs/inventories/suppliers/${_id}`,"GET",null).then(a=>{if([200].includes(a.status)){f(),_action="edit";const t=a.data.data;$("#code").val(t.code),$("#name").val(t.name),$("#country").val(t.country),$("#region").val(t.region),$("#city").val(t.city),$("#address").val(t.address),$("#postal_code").val(t.postal_code),$("#phone_no").val(t.phone_no),$("#fax_no").val(t.fax_no),$("#email").val(t.email),$("#web_url").val(t.web_url),$("#is_active").prop("checked",m(t.is_active)),$("#modalFormInput").modal("show")}else s.HtmlNotification(u(a.data),`${a.status} - ${a.statusText}`);o("#list_datatable",!1)}).catch(a=>{s.Notification(a.toString()),o("#list_datatable",!1)})}function D(){if(_dataTableSelectedValues.length<=0){s.HtmlNotification("Select 1 atau more data.");return}s.Confirm(`Are you sure want to delete ${_dataTableSelectedValues.length} data?`,null,"warning").then(e=>{n(!0,"#delete"),o("#list_datatable"),_data2Send=new URLSearchParams({id:JSON.stringify(_dataTableSelectedValues)}),c(`${_baseURL}/configs/inventories/suppliers`,"DELETE",_data2Send).then(a=>{[200].includes(a.status)?(Toast.fire({icon:"success",title:a.statusText,text:a.data.message}),p(),r(!1)):s.HtmlNotification(u(a.data),`${a.status} - ${a.statusText}`),n(!1,"#delete"),o("#list_datatable",!1)}).catch(a=>{s.Notification(a.toString()),n(!1,"#delete"),o("#list_datatable",!1)})}).catch(e=>{e&&console.log(e)})}function r(e=!0){_dataTableResetFilter=!1,_dataTable.ajax.reload(null,e)}function f(){_action="create",_data2Send=null,_formValidation.resetForm(),$("#formInput")[0].reset(),$("#is_active").prop("checked",!0)}function F(){$('#filter_is_active option[value=""]').prop("selected",!0).change(),$("#formFilter")[0].reset()}document.addEventListener("DOMContentLoaded",function(){S(),x(),y(),k(),w()});

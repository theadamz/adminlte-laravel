import{M as s,s as n,f as l,l as i,r as o,g as d}from"./general-DAK3ebw_.js";const r=document.querySelector("#formInput");let a={};function u(){_formValidation=$(r).validate({rules:{entity:{required:!0},site:{required:!0}},submitHandler:c})}function m(){document.getElementById("entityLOV").addEventListener("click",f),document.getElementById("siteLOV").addEventListener("click",v),a.entity=$("#entity").val(),a.site=$("#site").val()}function c(){s.Confirm("Are you sure want to save?").then(e=>{n(!0,"#save"),_data2Send=$("#formInput").serialize(),l(`${_baseURL}/change-unit`,"POST",_data2Send).then(t=>{[200].includes(t.status)?(Toast.fire({icon:"success",title:t.statusText,text:t.data.message}),i(!0,"Please wait","Please wait while your page refreshing..."),setTimeout(()=>{location.reload()},1e3)):(s.HtmlNotification(o(t.data),`${t.status} - ${t.statusText}`),d(t.data.errors)),n(!1,"#save")}).catch(t=>{s.Notification(t.toString()),n(!1,"#save")})}).catch(e=>{e&&console.log(e)})}function f(){i(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/setups/entities`,()=>{i(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(a.entity==$resultFromLOV.data.id)return;a.entity=$resultFromLOV.data.id,$("#entity").val($resultFromLOV.data.id),$("#entity_name").val($resultFromLOV.data.name),_(["site"])}})})}function v(){i(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/setups/sites?entity=${$("#entity").val()}`,()=>{i(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(a.site==$resultFromLOV.data.id)return;a.site=$resultFromLOV.data.id,$("#site").val($resultFromLOV.data.id),$("#site_name").val($resultFromLOV.data.name)}})})}function _(e){e.includes("entity")&&($("#entity").val(null),$("#entity_name").val(null)),e.includes("site")&&($("#site").val(null),$("#site_name").val(null))}document.addEventListener("DOMContentLoaded",function(){u(),m()});

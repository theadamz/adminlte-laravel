import{y as n,A as s,e as r,M as i,s as d,m as l,B as u,f as p,r as v,g,z as c,l as a}from"./general-DAK3ebw_.js";let m=null;const L=document.querySelector("#formInput");let e={};function y(){_formValidation=$(L).validate({rules:{category:{required:!0},category_sub:{required:!0},type:{required:!0},manufacturer:{required:!0},certificate:{required:!0},license_id:{required:!0},license_key:{required:!0},order_id:{required:!0},supplier:{required:!0},purchase_no:{required:!0},purchase_date:{required:!0,dateValid:!0},purchase_cost:{required:!0,formatNumber:!0},purchase_qty:{required:!0,formatNumber:!0},expire_date:{required:!0,dateValid:!0},maintenance_contract_id:{required:!0}},submitHandler:O})}function V(){n("#purchase_date","date"),n("#expire_date","date"),s("#purchase_cost","float"),s("#purchase_qty","int"),document.getElementById("clear").addEventListener("click",()=>_()),document.getElementById("categoryLOV").addEventListener("click",F),document.getElementById("subCategoryLOV").addEventListener("click",b),document.getElementById("manufacturerLOV").addEventListener("click",q),document.getElementById("certificateLOV").addEventListener("click",E),document.getElementById("supplierLOV").addEventListener("click",k)}function h(){r("#license_id"),r("#license_key"),r("#order_id"),r("#purchase_no"),r("#maintenance_contract_id")}function O(){i.Confirm("Are you sure?").then(o=>{d(!0,"#save"),m=`${_baseURL}/inventories/os-licenses`;const f="POST";_data2Send=new FormData($("#formInput")[0]),_data2Send.append("is_reassignable",$("#is_reassignable").is(":checked")),_data2Send.append("purchase_date",l($("#purchase_date").datetimepicker("viewDate"),"YYYY-MM-DD")),_data2Send.append("expire_date",l($("#expire_date").datetimepicker("viewDate"),"YYYY-MM-DD")),_data2Send.append("purchase_cost",u($("#purchase_cost").val())),_data2Send.append("purchase_qty",u($("#purchase_qty").val())),p(m,f,_data2Send,null).then(t=>{[201].includes(t.status)?(_action="create",Toast.fire({icon:"success",title:t.statusText,text:t.data.message}),_(),$("#modalFormInput").modal("hide")):(i.HtmlNotification(v(t.data),`${t.status} - ${t.statusText}`),g(t.data.errors)),d(!1,"#save")}).catch(t=>{i.Notification(t.toString()),d(!1,"#save")})}).catch(o=>{o&&console.log(o)})}function _(){_action="create",_data2Send=null,$("#formInput")[0].reset(),$("#type option:eq(0)").prop("selected",!0).change(),$("#is_reassignable").prop("checked",!1),$("#category").val(""),$("#category_sub").val(""),$("#manufacturer").val(""),$("#manufacturer_name").val(""),$("#certificate").val(""),$("#certificate_name").val(""),$("#supplier").val(""),$("#supplier_name").val(""),c("#purchase_date",moment()),c("#expire_date",moment()),$("#purchase_cost").val(0),$("#purchase_qty").val(0),_formValidation.resetForm(),e={}}function F(){a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/inventories/categories?is_active=true`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.category==$resultFromLOV.data.id)return;e.category=$resultFromLOV.data.id,$("#category").val($resultFromLOV.data.id),$("#category_name").val($resultFromLOV.data.name),$("#category_sub").val(null),$("#category_sub_name").val(null)}})})}function b(){$("#category").val()&&(a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/inventories/sub-categories?category=${$("#category").val()}`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.category_sub==$resultFromLOV.data.id)return;e.category_sub=$resultFromLOV.data.id,$("#category_sub").val($resultFromLOV.data.id),$("#category_sub_name").val($resultFromLOV.data.name)}})}))}function q(){a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/inventories/manufacturers?is_active=true`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.manufacturer==$resultFromLOV.data.id)return;e.manufacturer=$resultFromLOV.data.id,$("#manufacturer").val($resultFromLOV.data.id),$("#manufacturer_name").val($resultFromLOV.data.name)}})})}function E(){a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/inventories/certificates`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.certificate==$resultFromLOV.data.id)return;e.certificate=$resultFromLOV.data.id,$("#certificate").val($resultFromLOV.data.id),$("#certificate_name").val($resultFromLOV.data.name)}})})}function k(){a(),$("#_dynamic_content").load(`${_baseURL}/lov/configs/inventories/suppliers?is_active=true`,()=>{a(!1),$("#_modal_lov").modal("show"),$(".modal-dialog").addClass("modal-lg"),$("#_modal_lov").on("hide.bs.modal",function(){if($resultFromLOV.result){if(e.supplier==$resultFromLOV.data.id)return;e.supplier=$resultFromLOV.data.id,$("#supplier").val($resultFromLOV.data.id),$("#supplier_name").val($resultFromLOV.data.name)}})})}document.addEventListener("DOMContentLoaded",function(){y(),V(),h()});

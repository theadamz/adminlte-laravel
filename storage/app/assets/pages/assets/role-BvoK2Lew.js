import{i as m,a as h,c as b,e as f,M as i,s,f as o,r as c,g as _,h as n,_ as g}from"./general-DAK3ebw_.js";let d=null;const T=document.querySelector("#formInput");function S(){_dataTable=$("#list_datatable").DataTable({lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"All"]],pageLength:50,numbers_length:4,searchDelay:500,processing:!0,serverSide:!0,scrollX:!0,stateSave:_dataTableUseState,stateDuration:_dataTableStateDuration,scrollY:_dataTableScrollY,order:[[0,"asc"]],select:{items:"row",style:"single",className:"bg-warning"},headerCallback:function(t,a,l,e,L){t.getElementsByTagName("th")[0].innerHTML=`
            <div class="form-check">
               <input class="form-check-input datatable-group-checkable" type="checkbox" value="" id="groupCheckable" />
					<label class="form-check-label"></label>
            </div>`},createdRow:function(t,a,l){_dataTableSelectedValues.indexOf(a[_dataTableSelectColumn])>-1&&$(t).addClass("bg-light")},ajax:{url:`${_baseURL}/dt/configs/roles`,type:"GET",data:function(t){}},columns:[{data:"id",width:"30px",orderable:!1,searchable:!1,render:function(t,a,l,e){return`<div class="form-check">
                               <input class="form-check-input datatable-checkable" type="checkbox" value="${t}" ${_dataTableSelectedValues.indexOf(t)>-1?"checked":""} data-index="${e.row}" />
                                        <label class="form-check-label"></label>
                            </div>`}},{data:"name"},{data:"def_path"}]}).on("xhr.dt",function(t,a,l,e){setTimeout(()=>{_dataTable.columns.adjust()},300)}).on("draw.dt",function(t,a,l,e){m(_dataTable)}),h(_dataTable,'input[type="search"]'),document.querySelector("#refresh").addEventListener("click",()=>r(!1))}function x(){_formValidation=$(T).validate({rules:{name:{required:!0},def_path:{required:!0}},submitHandler:y})}function v(){$("#modalFormInput").on("hidden.bs.modal",u),b("#modalFormInput")}function k(){_permissions.edit&&document.querySelector("#edit").addEventListener("click",()=>{typeof _dataTable.row({selected:!0}).data()>"u"||w(_dataTable.row({selected:!0}).data().id.trim())}),_permissions.delete&&document.querySelector("#delete").addEventListener("click",E)}function p(){f("#name"),f("#def_path")}function y(){i.Confirm("Are you sure?").then(t=>{s(!0,"#save"),d=`${_baseURL}/configs/roles`,_action==="edit"&&(d+=`/${_id}`);const a=_action==="create"?"POST":"PUT",l=$("#is_active").is(":checked")?"":"&is_active=false";_data2Send=$("#formInput").serialize()+l,o(d,a,_data2Send).then(e=>{[201,200].includes(e.status)?(_action="create",Toast.fire({icon:"success",title:e.statusText,text:e.data.message}),u(),r(!1),$("#modalFormInput").modal("hide")):(i.HtmlNotification(c(e.data),`${e.status} - ${e.statusText}`),_(e.data.errors)),s(!1,"#save")}).catch(e=>{i.Notification(e.toString()),s(!1,"#save")})}).catch(t=>{t&&console.log(t)})}function w(t=null){_id=t,n("#list_datatable"),o(`${_baseURL}/configs/roles/${_id}`,"GET",null).then(a=>{if([200].includes(a.status)){u(),_action="edit";const l=a.data.data;$("#name").val(l.name),$("#def_path").val(l.def_path),$("#modalFormInput").modal("show")}else i.HtmlNotification(c(a.data),`${a.status} - ${a.statusText}`);n("#list_datatable",!1)}).catch(a=>{i.Notification(a.toString()),n("#list_datatable",!1)})}function E(){if(_dataTableSelectedValues.length<=0){i.HtmlNotification("Select 1 atau more data.");return}i.Confirm(`Are you sure want to delete ${_dataTableSelectedValues.length} data?`,null,"warning").then(t=>{s(!0,"#delete"),n("#list_datatable"),_data2Send=new URLSearchParams({id:JSON.stringify(_dataTableSelectedValues)}),o(`${_baseURL}/configs/roles`,"DELETE",_data2Send).then(a=>{[200].includes(a.status)?(Toast.fire({icon:"success",title:a.statusText,text:a.data.message}),g(),r(!1)):i.HtmlNotification(c(a.data),`${a.status} - ${a.statusText}`),s(!1,"#delete"),n("#list_datatable",!1)}).catch(a=>{i.Notification(a.toString()),s(!1,"#delete"),n("#list_datatable",!1)})}).catch(t=>{t&&console.log(t)})}function r(t=!0){_dataTableResetFilter=!1,_dataTable.ajax.reload(null,t)}function u(){_action="create",_data2Send=null,_formValidation.resetForm(),$("#formInput")[0].reset()}document.addEventListener("DOMContentLoaded",function(){S(),x(),v(),p(),k()});
